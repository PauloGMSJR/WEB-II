{% extends "base.html" %}
{% block title %}logGYM — Blog da Academia{% endblock %}

{% block content %}
  <section class="hero">
    <div>
      <h1>Bem-vindo ao logGYM</h1>
      <p>
        Inspiração diária para treinos, nutrição e recuperação. Descubra conteúdos
        criados por especialistas para atingir seus objetivos na academia.
      </p>
    </div>
    <img src="https://images.unsplash.com/photo-1517836357463-d25dfeac3438?auto=format&fit=crop&w=900&q=80" alt="Pessoa treinando na academia" />
  </section>

  <form class="filters" method="get">
    <label>
      Categoria
      <select name="categoria" onchange="this.form.submit()">
        <option value="">Todas</option>
        {% for category in categories %}
          <option value="{{ category }}" {% if category == selected_category %}selected{% endif %}>{{ category }}</option>
        {% endfor %}
      </select>
    </label>
    <label>
      Nível
      <select name="nivel" onchange="this.form.submit()">
        <option value="">Todos</option>
        {% for option in levels %}
          <option value="{{ option }}" {% if option == selected_level %}selected{% endif %}>{{ option }}</option>
        {% endfor %}
      </select>
    </label>
    {% if selected_category or selected_level %}
      <a class="reset" href="{{ url_for('index') }}">Limpar filtros</a>
    {% endif %}
  </form>

  <section class="posts-grid">
    {% if posts %}
      {% for post in posts %}
        <article class="post-card">
          <div class="post-meta">
            <span class="post-category">{{ post['category'] }}</span>
            <span class="post-level">{{ post['level'] }}</span>
          </div>
          <h2><a href="{{ url_for('post_detail', slug=post['slug']) }}">{{ post['title'] }}</a></h2>
          <p class="post-excerpt">{{ post['content'][:180] }}{% if post['content']|length > 180 %}...{% endif %}</p>
          <footer>
            <span>por {{ post['author_name'] }}</span>
            <time datetime="{{ post['created_at'] }}">{{ post['created_at'] | replace('T', ' ') }}</time>
            <span class="likes">❤️ {{ post['likes_total'] }}</span>
          </footer>
        </article>
      {% endfor %}
    {% else %}
      <p class="empty">Nenhum post encontrado com os filtros selecionados.</p>
    {% endif %}
  </section>
{% endblock %}
